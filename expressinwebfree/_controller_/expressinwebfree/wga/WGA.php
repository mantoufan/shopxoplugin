<?php
/*
 Encode by www.phpen.cn 
*/
 namespace app\plugins\expressinwebfree\wga; use think\Controller; use app\service\PluginsService; class WGA extends Controller { private static function wga() { goto O3LDt; bhxPD: bpKOK: goto HBZbJ; utfig: if (isset($r["\x64\141\x74\x61"]) && isset($r["\144\141\x74\x61"]["\x74\x69\x70"]) && !empty($r["\x64\141\x74\141"]["\x74\x69\x70"])) { goto mtT33; } goto yx6y0; I2ht_: if (!(isset($r["\143\x6f\144\145"]) && $r["\143\157\x64\145"] === -1)) { goto l3tGA; } goto djKvL; dZIe4: file_put_contents($root . "\57\167\147\x61\x5f\x74\151\x70\x2e\164\x78\164", $r["\144\x61\x74\x61"]["\164\151\x70"]); goto i3GE5; O3LDt: $root = dirname(__FILE__); goto I8LcC; yeG0h: l3tGA: goto utfig; yx6y0: if (!file_exists($root . "\x2f\167\147\141\x5f\164\x69\x70\x2e\x74\170\x74")) { goto bpKOK; } goto XUvE8; sJt3B: $r = json_decode($r, true); goto I2ht_; L5Ioq: return false; goto nOy7q; HBZbJ: goto gHFcP; goto Iwjn5; n3gY2: $_domain_ar = !empty($_SERVER["\110\124\x54\x50\x5f\x48\x4f\123\124"]) ? explode("\72", $_SERVER["\x48\x54\x54\120\137\110\x4f\123\124"]) : array($_SERVER["\x53\x45\x52\126\x45\122\137\x4e\x41\x4d\105"]); goto zxzUL; zxzUL: $_domain = reset($_domain_ar); goto qRgYY; Iwjn5: mtT33: goto dZIe4; Y5Yk2: if (!$r) { goto UFRUL; } goto sJt3B; qRgYY: $r = @file_get_contents("\x68\x74\x74\160\163\72\57\57\x61\x70\151\x2e\x6f\163\x31\x32\x30\x2e\x63\x6f\155\57\x77\x67\x61\x2f\166\x65\x72\151\146\171\77\157\x75\x74\137\164\x79\x70\x65\75\152\x73\157\x6e\46\156\x61\x6d\x65\x3d\x73\x68\157\160\170\x6f\160\x6c\x75\x67\x69\x6e\x5f" . $config["\x62\141\163\145"]["\160\x6c\x75\x67\151\x6e\163"] . "\46\x76\x65\x72\163\x69\x6f\x6e\75" . $config["\142\x61\x73\x65"]["\166\x65\x72\163\x69\157\x6e"] . "\46\144\x65\163\x3d\xe6\xad\243\347\x89\x88\xe9\xaa\214\350\257\201\x26\x64\x6f\x6d\141\x69\x6e\x3d" . $_domain, false, stream_context_create(array("\x68\x74\x74\x70" => array("\x6d\x65\164\150\157\144" => "\x47\105\124", "\164\151\155\x65\x6f\x75\164" => 3)))); goto Y5Yk2; djKvL: return $r["\x6d\163\147"]; goto yeG0h; XUvE8: unlink($root . "\x2f\167\x67\141\x5f\164\x69\x70\56\x74\x78\x74"); goto bhxPD; i3GE5: gHFcP: goto CNxSC; CNxSC: UFRUL: goto L5Ioq; I8LcC: $config = self::config(); goto n3gY2; nOy7q: } public static function config() { return json_decode(file_get_contents(dirname(__FILE__) . "\57\56\x2e\57\143\157\x6e\x66\x69\147\56\152\x73\157\x6e"), true); } public static function tip() { goto Sm5C0; Sm5C0: if (!file_exists(dirname(__FILE__) . "\x2f\167\x67\x61\x5f\164\151\x70\x2e\x74\x78\x74")) { goto lW4x8; } goto Jrx4W; ijCbW: return ''; goto JxH7I; Jrx4W: return "\74\144\x69\x76\x20\143\x6c\141\163\x73\75\x22\x61\x6d\55\141\154\145\162\164\42\x20\144\x61\x74\x61\x2d\141\155\55\141\154\x65\x72\164\x3e\x3c\142\x75\164\x74\157\156\x20\x74\x79\x70\145\75\42\142\x75\164\x74\157\x6e\x22\x20\x63\x6c\141\163\x73\x3d\42\x61\155\55\x63\154\157\163\x65\x22\x3e\46\164\x69\x6d\x65\x73\x3b\x3c\57\142\165\x74\164\157\156\x3e" . file_get_contents(dirname(__FILE__) . "\57\167\x67\x61\x5f\x74\x69\x70\x2e\x74\170\x74") . "\74\57\x64\151\x76\x3e"; goto Ul6mk; Ul6mk: lW4x8: goto ijCbW; JxH7I: } public function html($params = []) { goto ix86R; bHhmT: xCsGi: goto DkIKd; lh8PJ: $res = self::wga(); goto dvTnV; JAxzg: OqdOb: goto jmWKw; DkIKd: $ret = PluginsService::PluginsData($config["\142\x61\163\x65"]["\160\154\x75\147\151\x6e\163"], ["\x69\x6d\x61\147\x65\x73"]); goto Rqo8F; dvTnV: if (!$res) { goto MnONt; } goto QlU1W; PkMO6: MnONt: goto bHhmT; tluxA: return $this->fetch("\x2e\56\x2f\x2e\56\x2f\x2e\x2e\57\x70\154\x75\x67\151\x6e\x73\57\x76\x69\x65\x77\x2f" . $config["\142\x61\163\x65"]["\160\154\x75\147\x69\156\x73"] . "\x2f\x69\x6e\144\x65\170\57\160\x75\x62\x6c\x69\143\x2f\x63\157\x6e\x74\x65\x6e\x74"); goto JAxzg; QlU1W: return "\74\x73\143\162\151\x70\164\x20\144\x65\146\x65\x72\x3e\x41\115\x55\111\x2e\144\151\141\x6c\157\x67\x2e\x61\x6c\145\162\x74\50\173\164\x69\x74\154\x65\72\40\x27" . $config["\142\x61\163\x65"]["\156\x61\155\145"] . "\47\54\40\x63\157\x6e\164\x65\156\x74\x3a\40\x27" . $res . "\x27\175\x29\74\57\163\x63\162\151\160\x74\76"; goto PkMO6; Rqo8F: if ($ret["\x63\157\x64\145"] == 0) { goto zHHs9; } goto H7WNj; lgEVn: if (!(rand(0, 100) > 85)) { goto xCsGi; } goto lh8PJ; ASTMb: $this->assign("\144\x61\164\141", $ret["\x64\x61\164\x61"]); goto tluxA; r9lb1: goto OqdOb; goto zgrU_; ix86R: $config = self::config(); goto lgEVn; H7WNj: return $ret["\x6d\x73\x67"]; goto r9lb1; zgrU_: zHHs9: goto ASTMb; jmWKw: } public function save($params = []) { goto fwqkd; fwqkd: $res = self::wga(); goto tsR7z; bE2EP: return PluginsService::PluginsDataSave(["\160\x6c\x75\x67\x69\156\x73" => $config["\x62\141\163\145"]["\160\154\165\x67\x69\156\x73"], "\144\141\x74\x61" => $params]); goto KXttB; TgDrW: pifTi: goto mkEWN; tsR7z: if (!$res) { goto pifTi; } goto cEyTV; mkEWN: $config = self::config(); goto bE2EP; cEyTV: return DataReturn($res, -1); goto TgDrW; KXttB: } }